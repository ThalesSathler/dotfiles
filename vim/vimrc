" An example for a vimrc file.
"
" Maintainer:	Bram Moolenaar <Bram@vim.org>
" Last change:	2008 Jul 02
"
" To use it, copy it to
"     for Unix and OS/2:  ~/.vimrc
"	      for Amiga:  s:.vimrc
"  for MS-DOS and Win32:  $VIM\_vimrc
"	    for OpenVMS:  sys$login:.vimrc

" When started as "evim", evim.vim will already have done these settings.
if v:progname =~? "evim"
  finish
endif

" Use Vim settings, rather then Vi settings (much better!).
" This must be first, because it changes other options as a side effect.
set nocompatible

" allow backspacing over everything in insert mode
set backspace=indent,eol,start

if has("vms")
  set nobackup		" do not keep a backup file, use versions instead
else
  set backup		" keep a backup file
endif
set history=50		" keep 50 lines of command line history
set ruler		" show the cursor position all the time
set showcmd		" display incomplete commands
set incsearch		" do incremental searching

" For Win32 GUI: remove 't' flag from 'guioptions': no tearoff menu entries
" let &guioptions = substitute(&guioptions, "t", "", "g")

" Don't use Ex mode, use Q for formatting
map Q gq

" CTRL-U in insert mode deletes a lot.  Use CTRL-G u to first break undo,
" so that you can undo CTRL-U after inserting a line break.
inoremap <C-U> <C-G>u<C-U>

" In many terminal emulators the mouse works just fine, thus enable it.
if has('mouse')
  set mouse=a
endif

" Switch syntax highlighting on, when the terminal has colors
" Also switch on highlighting the last used search pattern.
if &t_Co > 2 || has("gui_running")
  syntax on
  set hlsearch
endif

set ts=2
set sw=2
set et

" Only do this part when compiled with support for autocommands.
if has("autocmd")

  " Enable file type detection.
  " Use the default filetype settings, so that mail gets 'tw' set to 72,
  " 'cindent' is on in C files, etc.
  " Also load indent files, to automatically do language-dependent indenting.
  filetype plugin indent on

  " Put these in an autocmd group, so that we can delete them easily.
  augroup vimrcEx
  au!

  " For all text files set 'textwidth' to 78 characters.
  autocmd FileType text setlocal textwidth=78

  " When editing a file, always jump to the last known cursor position.
  " Don't do it when the position is invalid or when inside an event handler
  " (happens when dropping a file on gvim).
  " Also don't do it when the mark is in the first line, that is the default
  " position when opening a file.
  autocmd BufReadPost *
    \ if line("'\"") > 1 && line("'\"") <= line("$") |
    \   exe "normal! g`\"" |
    \ endif

  augroup END

else

  set autoindent		" always set autoindenting on

endif " has("autocmd")

" Convenient command to see the difference between the current buffer and the
" file it was loaded from, thus the changes you made.
" Only define it when not defined already.
if !exists(":DiffOrig")
  command DiffOrig vert new | set bt=nofile | r # | 0d_ | diffthis
		  \ | wincmd p | diffthis
endif




set rtp+=~/.vim/bundle/Vundle.vim/
call vundle#begin()

" Plugins
Plugin 'bling/vim-airline'
Plugin 'spf13/vim-colors'
Plugin 'kien/ctrlp.vim'
Plugin 'majutsushi/tagbar'
Plugin 'tpope/vim-fugitive'
Plugin 'vim-scripts/surround.vim'
Plugin 'vim-scripts/tComment'
Plugin 'scrooloose/nerdtree'
Plugin 'Shougo/neocomplete.vim'
Plugin 'zenorocha/dracula-theme', {'rtp': 'vim/'}
Plugin 'powerline/powerline', {'rtp': 'powerline/bindings/vim/'}
Plugin 'matze/vim-move'
Plugin 'ervandew/supertab'
Plugin 'myusuf3/numbers.vim'
Plugin 'alvan/vim-closetag'
Plugin 'ekalinin/Dockerfile.vim'
Plugin 'jistr/vim-nerdtree-tabs'
Plugin 'EinfachToll/DidYouMean'
Plugin 'fatih/vim-go' " Run :GoInstallBinaries 
Plugin 'tpope/vim-dispatch'
Plugin 'mhinz/vim-signify'
Plugin 'nathanaelkane/vim-indent-guides' " <leader>ig to toggle visbility
Plugin 'airblade/vim-rooter'

" ColorSchemes
Plugin 'fcevado/molokai_dark'
Plugin 'altercation/vim-colors-solarized'
Plugin 'vim-scripts/phd'
Plugin 'zanloy/vim-colors-sunburst'
Plugin 'loogica/vim_themes'
Plugin 'endel/vim-github-colorscheme'
Plugin 'vim-scripts/bclear'
Plugin 'baeuml/summerfruit256.vim'
Plugin 'mileszs/ack.vim'
Plugin 'zanglg/nova.vim'
Plugin 'chriskempson/base16-vim'

call vundle#end()

"General settings

" Auto load when file is changed
set autoread

" Move backups off of current dir
set backupdir=/tmp,~/.vim/.backups,.

"Ctrl+F4 closes current buffer

nnoremap <C-F4> :close<cr>

let mapleader="\<Space>"

set wildignore+=*.py~,build/*.*

" Navigate to previous tag o tagstack
nmap <C-[> :pop<CR>

" For airblade/vim-rooter
let g:rooter_change_directory_for_non_project_files = 'current'
let g:rooter_silent_chdir = 1
let g:rooter_resolve_links = 1

" For signify plugin
let g:signify_vcs_list = ['git']
let g:signify_realtime = 1

nmap <leader>gj <plug>(signify-next-hunk)
nmap <leader>gk <plug>(signify-prev-hunk)


" For closetag plugin
autocmd FileType html,htmldjango,jinjahtml,eruby,mako let b:closetag_html_style=1
let g:closetag_filenames = "*.html,*.xhtml,*.phtml,*.xml"

" Supertab
let g:SuperTabContextDefaultCompletionType = "<c-n>"
let g:SuperTabDefaultCompletionType = "<c-n>"

" Tagbar
let g:tagbar_usearrows = 1
noremap <Leader>l :TagbarToggle<CR>

" NERDTree
noremap <Leader>n :NERDTreeTabsToggle<CR>

" For solarized color scheme
set background=dark
let g:solarized_termtrans=1
let g:solarized_termcolors=256
let g:solarized_contrast="high"
let g:solarized_visibility="high"
set termguicolors
colorscheme base16-solarflare

""" Vim-AirLine
"
let g:airline#extensions#tabline#enabled = 1
let g:airline#extensions#tabline#left_sep = ' '
let g:airline_powerline_fonts = 1
let g:airline#extensions#tabline#tab_nr_type = 2 " splits and tab number
let g:airline#extensions#tabline#fnamemod = ':p:.'
let g:airline#extensions#tabline#formatter = 'unique_tail'
let g:airline#extensions#tabline#show_close_button = 0

" New tab
noremap <C-t> :tabnew<CR>
noremap <leader>t :tab sball<CR>

" Show line numbers
set number

" For colors in terminal
set t_Co=256

" Disable pylint on every save
" let g:pymode_lint = 0


" Retira a barra de ferramentas e o Menu
set guioptions-=T
set guioptions-=m

" Thanks to denilsonsa
function! Salvar_setKeys()
	"Use Ctrl+S to save
	nnoremap <silent> <C-S>      :update<CR>
	vnoremap <silent> <C-S> <C-C>:update<CR>
	inoremap <silent> <C-S> <C-O>:update<CR>

	nnoremap <silent> <C-S-S>      :wall<CR>
	vnoremap <silent> <C-S-S> <C-C>:wall<CR>
	inoremap <silent> <C-S-S> <C-O>:wall<CR>
endfunc

au GUIEnter * call Salvar_setKeys()


" Auto source .vimrc after editing .vimrc
if has("autocmd")
  autocmd bufwritepost vimrc source $MYVIMRC
endif


" For fugitive.vim
nnoremap <C-G><C-s> :Gstatus <cr>
nnoremap <C-G><C-c> :Gcommit <cr>
nnoremap <C-G><C-d> :Gvdiff <cr>
nnoremap <C-G><C-p> :Git push <cr>


" Disable automatic python code folding
let g:pymode_folding = 0

" For Pytest
nnoremap <leader>R :Pytest class<cr>

""" CTRLP
"
let g:ctrlp_cmd = "CtrlPMixed"
let g:ctrlp_working_path_mode = 'ra'
let g:ctrlp_regexp = 1
let g:ctrlp_switch_buffer = 'Et'

let g:ctrlp_prompt_mappings = {
    \ 'AcceptSelection("e")': ['<c-t>'],
    \ 'AcceptSelection("t")': ['<cr>', '<2-LeftMouse>'],
    \ }

" Some interesting annotations about vim commands

" Movendo janelas/splits ^W seguido de shift+ H ou J ou K ou L
" 
" i = insere antes do cursor
" a = insere após o cursor
" I = insere no início da linha (respeitando indentação)
" gI = insere no início da linha
" A = insere no final da linha
" 
" cc = change line
" dd = delete line
" cw = change word
" dw = delete word
" C = change until the end of the line
" D = delete until the end of the line
" Y = DOESN'T copy until EOL. :( (mas eu remapeei no meu vimrc)
" 
" ; = refaz o último f, F, t, T
" , = refaz o último f, F, t, T na direção contrária
" 
" di" = isso nao precisa do surround
" ci" = isso nao precisa do surround
" 
" gugu = lowercase line
" guu  = lowercase line
" gUU  = uppercase line
" gUgU = uppercase line
" gu ou gU seguido de movimento = similar ao d, y, c, ...
" ~ = toggle case of a character
" 
" Ctrl+A = incrementa
" Ctrl+X = decrementa
" 
" visual...
" Ctrl+V = visual (block)
" pode ser combinado com I ou A para inserir algo em todas as linhas
"
" H, M, L: Move o cursor para uma posição da tela atual. High, Medium, Low
" ctrl+e (Up) e ctrl+y (Down) Scroll de uma linha por vez, sem mover o cursor
" 
"
" Macros:
" qa = inicia a gravação no registrador a (poderia ser qualquer letra)
" q = termina a gravação
" @a = executa a macro gravada em a
" @@ = re-executa a última macro
" 
" Copy-and-paste from different registers:
" "a = Usa o registrador a (veja :help registers para lista de registradores)
" "+ = buffer de ctrl+c e ctrl+v
" "* = buffer de X11 primary selection
" "/ = buffer de busca
" 
" No modo de inserção (ou na linha de :comando):
" ^R seguido de um registrador = insere o conteúdo daquele registrador
" 
" 
" No meu vimrc o Ctrl-S salva, F12 faz toggle de wrap, shift+F12 faz toggle de
" horizontal scrollbar.
" 

" NERDTree
let g:nerdtree_tabs_open_on_gui_startup = 0

" Plugins legais:

" Gundo
" speeddate (ou algo assim)
" 
" http://denilsonsa.selfip.org/~denilson/vimrc
autocmd BufRead,BufNewFile *.ino set filetype=cpp
autocmd BufRead,BufNewFile Dockerfile-* set syntax=dockerfile


" Opens .vimrc at any time, in a new tab
nnoremap <Leader>v :tabedit $MYVIMRC<cr>
nnoremap <Leader>s :tabedit ~/.ssh/config<cr>
"set guifont=Inconsolata\ for\ Powerline\ 12

" http://input.fontbureau.com/
set guifont=Input\ Regular\ 12
